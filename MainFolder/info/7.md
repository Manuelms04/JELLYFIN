<h2 align="center"> 游댏 CONFIGURACI칍N DE HTTPS CON CADDY 游댏 </h2>

*Se utiliza Caddy como servidor proxy inverso, que permite acceder a Jellyfin desde internet con HTTPS autom치tico, usando un dominio de DuckDNS*

---

### `Paso 1`: Averiguar IP de Docker Bridge `(docker0)`

- Ejecutar el siguiente comando:

```bash
ip a
```

- Buscar la interfaz `docker0`. Por ejemplo, puede verse as칤:

```sql
3: docker0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 ...
    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0
```

---


### `Paso 2`: Uso de Caddy como proxy inverso con HTTPS autom치tico

```bash
mkdir -p /home/manuelms/caddy
cd /home/manuelms/caddy
```

---

### `Paso 3`: Crear el archivo Caddyfile:

```bash
nano Caddyfile
```

*Contenido*:

```cpp
manuelms.duckdns.org {
    reverse_proxy IP_DOCKER_BRIDGE:8096
    # redir https://manuelms.duckdns.org  # opcional si se quiere forzar HTTPS en HTTP
}
```

> *Explicaci칩n de par치metros*

- `reverse_proxy`: Redirige el tr치fico del dominio hacia Jellyfin
- `redir`: Esta directiva fuerza que cualquier intento de acceder al dominio mediante HTTP sea redirigido a HTTPS

> Caddy genera y renueva autom치ticamente certificados SSL mediante `Let's Encrypt`

---

### `Paso 4`: Archivo docker-compose.yml:

- Se a침ade el servicio `caddy` al archivo `docker-compose.yml` que se tiene creado anteriormente

```yaml
  caddy:
    image: caddy:latest
    container_name: caddy
    restart: unless-stopped
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - /home/manuelms/caddy/Caddyfile:/etc/caddy/Caddyfile
      - caddy_data:/data
      - caddy_config:/config
    networks:
      - caddy_net

volumes:
  caddy_data:
  caddy_config:

networks:
  caddy_net:
    driver: bridge

```

> *Explicaci칩n de par치metros*

- `ports`: Expone puertos HTTP (80) y HTTPS (443)

- `volumes`: Guarda configuraci칩n y certificados

- `networks`: Conecta Caddy a la red interna para comunicarlo con Jellyfin

---

### `Paso 5`: Levantar contenedor:

```bash
sudo docker compose up -d caddy
```

---

### `Paso 6`: Comprobaci칩n

Acceso seguro: 
```bash
https://manuelms.duckdns.org
```

